####################
##   ALL SYSTEMS  ##
####################
# VARIABLES
# Define nano or micro
if [ -x "$(command -v micro)" ]; then
    # Micro as the default text editor
    export EDITOR='micro'
else
    export EDITOR='nano'
fi

###############################
##   Script for ZSH or BASH  ##
###############################
if [ -n "`$SHELL -c 'echo $ZSH_VERSION'`" ]; then
    # assume Zsh
    # zsh $DOTFOLDER/custom_script.sh
    alias reload='source $DOTFOLDER/.zshrc'
    alias config='$EDITOR $DOTFOLDER/.zshrc'
elif [ -n "`$SHELL -c 'echo $BASH_VERSION'`" ]; then
    # assume Bash
    # sh $DOTFOLDER/custom_script.sh
    alias reload='source $DOTFOLDER/.bashrc'
    alias config='$EDITOR $DOTFOLDER/.bashrc'
else
    # something else like fish
fi
alias aliases='$EDITOR $DOTFOLDER/.bash_aliases'

#Simple command to make a directory and then change to it
mkdircd(){ mkdir -p "$1" && cd "$1" ; }

###############
##   Linux   ##
###############

# if [ -x "$(command -v program_to_check)" ]; then
#    # <insert commands here>
# fi

# === CUSTOM ===
alias cls='clear'
alias back='cd $OLDPWD'
alias ssha='eval $(ssh-agent) && ssh-add'
alias mde='mkdircd' # Depends on the function defined above
alias setup-nala-legacy='echo "deb http://deb.volian.org/volian/ scar main" | sudo tee /etc/apt/sources.list.d/volian-archive-scar-unstable.list && wget -qO - https://deb.volian.org/volian/scar.key | sudo tee /etc/apt/trusted.gpg.d/volian-archive-scar-unstable.gpg > /dev/null && sudo apt update && sudo apt install -y nala'
alias setup-nala='sudo apt update && sudo apt install -y nala'
alias df='df -Hl'
alias install-micro='sudo apt install xclip && curl https://getmic.ro | bash && mv micro /usr/local/bin/'
# Command below installs micro as the default system editor and must be executed from root user
alias install-micro-default='su - root -c "cd /usr/bin; wget -O- https://getmic.ro | GETMICRO_REGISTER=y sh"'
alias lsmount='mount | column -t'
alias extip='curl icanhazip.com'
# Needs python3 installed
alias speedtest='curl -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py | python3 -'


# === NAVIGATION ===
alias home='cd ~'
alias cd..='cd ..'
alias cd...='...'
alias cd....='....'
alias cd.....='.....'
alias cd......='......'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias .....='cd ../../../..'
alias ......='cd ../../../../..'
alias _='sudo '
alias s='sudo '
alias md='mkdir -p'
alias rd='rm -fr '
alias rmf='rm -f '
alias x='exit'
alias la='ls -lAFq'


# === SYSTEM MANAGEMENT ===
alias shutdown='sudo shutdown -h now'
alias reboot='sudo reboot'
alias poweroff='sudo poweroff'
alias root='sudo -i'
alias su='sudo -i'
alias wget='wget -c'
# alias ?='apropos'
alias myip='hostname -I | awk '\''{print }'\'''

# === PACKAGE MANAGEMENT ===
if [ -x "$(command -v nala)" ]; then
    alias install='sudo nala install -y'
    alias upgrade='sudo nala update && sudo nala upgrade -y'
    alias update='sudo nala update'
else
    alias install='sudo apt install -y'
    alias upgrade='sudo apt update && sudo  ugrade -y'
    alias update='sudo apt update'
fi

# === DOCKER ===
if [ -x "$(command -v docker)" ]; then
    alias dps='docker ps'
    alias dpsa='docker ps -all'
    alias dpsdown='docker ps -f 'status=exited''
    alias dup='docker start'
    alias ddown='docker stop'
    alias dli='docker images'
    alias dcupd='docker compose up -d'

    # (Next Command) brings up all containers if one is not defined after dcup
    alias dcup='docker compose up -d'
    # (Next Command) brings down all containers if one is not defined after dcdown
    alias dcdown='docker compose stop'
    # (Next Command) pulls all new images is specified after dcpull
    alias dcpull='docker compose pull'
    alias dclogs='docker compose logs -tf --tail="50" '  
    alias dtail='docker logs -tf --tail="50" "$@"'
fi

# === Programs ===
if [ -x "$(command -v python3)" ]; then
    alias python='python3'
fi
if [ -x "$(command -v pip3)" ]; then
   alias pip='pip3'
fi

if [ -x "$(command -v exa)" ]; then
    alias ls="exa --icons --group-directories-first"
    alias la="exa --long --icons --header --all --group --group-directories-first --git"
    alias tree="exa --long --icons --header --all --group --group-directories-first --git --tree"
fi

if [ -x "$(command -v chezmoi)" ]; then
    alias cm='chezmoi'
    alias aliases='chezmoi edit $DOTFOLDER/.bash_aliases'
    alias config='chezmoi edit $DOTFOLDER/.zshrc'
    alias apply='chezmoi apply'
    alias init='chezmoi init --apply claubervs'
fi

if [ -x "$(command -v bat)" ]; then
    alias cat='bat'
elif [ -x "$(command -v batcat)" ]; then
	alias cat='batcat'
fi

if [ -x "$(command -v lazygit)" ]; then
    alias lg='lazygit'
fi


###############
##   MACOS   ##
###############
bcubc='brew cask reinstall $(brew cask outdated) && brew cleanup'
bcubo='brew update && brew cask outdated'
brewp='brew pin'
brews='brew list -1'
brewsp='brew list --pinned'
bubc='brew upgrade && brew cleanup'
bubo='brew update && brew outdated'
bubu='bubo && bubc'
hidefiles='defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder'
showfiles='defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder'
